# PDF分割ツール

1500ページを超える大きなPDFファイルを複数の小さなファイルに分割するためのPythonスクリプトです。

## 機能

- **ページ数による分割**: 指定した最大ページ数ごとにPDFを分割
- **目次による分割**: PDFの目次（しおり）に従って分割（オプションで最大ページ数も指定可能）

## インストール

必要なライブラリをインストール:

```bash
uv add pypdf
```

## 使い方

```bash
python main.py [PDFファイルのパス] [オプション]
```

### オプション

- `-m`, `--max-pages`: 1ファイルあたりの最大ページ数
- `-t`, `--use-toc`: 目次に従って分割する
- `-o`, `--output-dir`: 出力先ディレクトリ（デフォルト: output）

### 使用例

#### ページ数による分割

PDFを100ページごとに分割:

```bash
python main.py large_document.pdf --max-pages 100
```

#### 目次による分割

PDFを目次に従って分割（章ごとに分割）:

```bash
python main.py large_document.pdf --use-toc
```

目次に従って分割するが、1ファイルあたり200ページを超えないようにする:

```bash
python main.py large_document.pdf --use-toc --max-pages 200
```

### 出力

スクリプトは指定した出力ディレクトリに分割されたPDFファイルを作成します。ファイル名は元のファイル名に連番を付けた形式になります（例: `document_part001.pdf`, `document_part002.pdf`, ...）。

## 詳細な使用方法

### 基本的な使い方

1. 分割したいPDFファイルを準備します
2. コマンドラインから以下のように実行します：

```bash
# 単純にページ数で分割する場合
python main.py your_large_document.pdf --max-pages 150

# 目次に従って分割する場合
python main.py your_large_document.pdf --use-toc
```

3. 分割されたファイルは、デフォルトでは「output」ディレクトリに保存されます
4. 別の出力先を指定する場合は、`--output-dir`オプションを使用します：

```bash
python main.py your_large_document.pdf --max-pages 150 --output-dir split_pdfs
```

### 目次による分割の仕組み

目次による分割モード（`--use-toc`）を使用すると、PDFの目次（しおり）情報を読み取り、章や節ごとに分割します。

- 目次情報がない場合は、自動的にページ数による分割（デフォルト100ページ）に切り替わります
- `--max-pages`オプションを併用すると、目次に基づく分割でも、指定ページ数を超えるファイルが作成されないよう調整します
  - これは特に長い章がある場合に便利です
  - 例えば、1つの章が300ページあり、最大ページ数を200に設定した場合、その章は適切なポイントで分割されます

### エラー処理

- 存在しないファイルを指定した場合はエラーメッセージが表示されます
- 目次モードを使用せず、最大ページ数も指定しない場合はエラーになります
- PDFの読み込みや処理中にエラーが発生した場合は、エラーメッセージが表示されます

### ヒント

- 非常に大きなPDFファイル（1500ページ以上）を処理する場合、処理に時間がかかることがあります
- 目次情報が複雑な場合、想定通りに分割されないことがあります。その場合は単純なページ数による分割を試してみてください
- 出力ファイルは連番で命名されるため、既存のファイルが上書きされる可能性があります。必要に応じて新しい出力ディレクトリを指定してください